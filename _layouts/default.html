<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EK7Y276VXR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-EK7Y276VXR');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title }} - Frenk Dragar</title>
    
    <meta name="description" content="{{ page.description | default: site.description }}">
    <meta name="keywords" content="AI, Technology, Engineering, Frenk Dragar, Trivial Group">
    <meta name="author" content="Frenk Dragar">
    
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    <meta property="og:title" content="{{ page.title }} - Frenk Dragar">
    <meta property="og:description" content="{{ page.description | default: site.description }}">
    <meta property="og:image" content="{{ site.url }}/assets/images/frenk.jpeg">

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ site.url }}{{ page.url }}">
    <meta property="twitter:title" content="{{ page.title }} - Frenk Dragar">
    <meta property="twitter:description" content="{{ page.description | default: site.description }}">
    <meta property="twitter:image" content="{{ site.url }}/assets/images/frenk.jpeg">

    <link rel="canonical" href="{{ site.url }}{{ page.url }}">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/assets/css/main.css">
    <!-- Apply theme before render to prevent flash -->
    <script>
      (function() {
        var t = localStorage.getItem('theme');
        if (t === 'dark' || t === 'light') {
          document.documentElement.setAttribute('data-theme', t);
        }
      })();
    </script>
</head>
<body>
    <!-- Navigation -->
    <nav class="site-nav">
        <div class="nav-inner">
            <a href="/" class="nav-logo">Frenk Dragar</a>

            <!-- Mobile button -->
            <button class="mobile-menu-btn" id="mobile-menu-button" type="button" aria-label="Toggle menu">
                <svg width="18" height="18" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>

            <!-- Desktop links -->
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/projects" class="nav-link">Projects</a>
                <a href="/publications" class="nav-link">Writing & Content</a>
                <a href="/appearances" class="nav-link">Appearances</a>
            </div>
        </div>

        <!-- Mobile menu -->
        <div class="mobile-nav" id="mobile-menu">
            <a href="/" class="nav-link">Home</a>
            <a href="/projects" class="nav-link">Projects</a>
            <a href="/publications" class="nav-link">Writing & Content</a>
            <a href="/appearances" class="nav-link">Appearances</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        {{ content }}
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-inner">
            <span class="footer-copy">© {{ 'now' | date: "%Y" }} Frenk Dragar &middot; Updated {{ site.time | date: "%b %Y" }}</span>
            <div class="footer-links">
                <a href="https://linkedin.com/in/frenk-dragar" class="footer-link" target="_blank" rel="noopener">LinkedIn ↗</a>
                <a href="https://github.com/frenkd" class="footer-link" target="_blank" rel="noopener">GitHub ↗</a>
                <a href="/privacy-policy" class="footer-link">Privacy</a>
                <div class="theme-toggle" id="theme-toggle" aria-label="Switch theme">
                    <button class="theme-btn" data-theme-val="system" title="System">
                        <svg width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8M12 17v4"/></svg>
                    </button>
                    <button class="theme-btn" data-theme-val="light" title="Light">
                        <svg width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="4"/><path stroke-linecap="round" d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M4.93 19.07l1.41-1.41M17.66 6.34l1.41-1.41"/></svg>
                    </button>
                    <button class="theme-btn" data-theme-val="dark" title="Dark">
                        <svg width="12" height="12" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
                    </button>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const btn = document.getElementById('mobile-menu-button');
            const menu = document.getElementById('mobile-menu');
            if (btn && menu) {
                btn.addEventListener('click', function() {
                    menu.classList.toggle('open');
                });
            }
        });
    </script>

    <script src="/assets/js/upcoming-badge.js"></script>
    <script>
      (function() {
        var STORAGE_KEY = 'theme';
        var current = localStorage.getItem(STORAGE_KEY) || 'system';

        function applyTheme(t) {
          if (t === 'system') {
            document.documentElement.removeAttribute('data-theme');
          } else {
            document.documentElement.setAttribute('data-theme', t);
          }
        }

        function updateButtons(t) {
          document.querySelectorAll('[data-theme-val]').forEach(function(btn) {
            btn.classList.toggle('active', btn.getAttribute('data-theme-val') === t);
          });
        }

        document.addEventListener('DOMContentLoaded', function() {
          updateButtons(current);
          document.querySelectorAll('[data-theme-val]').forEach(function(btn) {
            btn.addEventListener('click', function() {
              var t = btn.getAttribute('data-theme-val');
              localStorage.setItem(STORAGE_KEY, t);
              current = t;
              applyTheme(t);
              updateButtons(t);
            });
          });
        });
      })();
    </script>
</body>
</html>
